name: Dev Testing

on:
  push:
    branches: [dev]
  pull_request:
    branches: [dev]

jobs:
  test-dev:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout c√≥digo
      uses: actions/checkout@v4
      
    - name: Entorno de desarrollo
      run: |
        echo "üß™ ENTORNO DE PRUEBAS - RAMA DEV"
        echo "================================"
        echo "Este es un entorno de pruebas para la rama de desarrollo"
        echo ""
        echo "üîß Configurando entorno..."
        echo "Node.js versi√≥n: $(node --version 2>/dev/null || echo 'No instalado')"
        echo "NPM versi√≥n: $(npm --version 2>/dev/null || echo 'No instalado')"
        
    - name: Pruebas b√°sicas
      run: |
        echo "üß™ Ejecutando pruebas..."
        
        # Prueba 1: Verificar sintaxis HTML b√°sica
        echo "1. Validando HTML..."
        if grep -q "<!DOCTYPE html>" index.html; then
          echo "   ‚úÖ DOCTYPE correcto"
        else
          echo "   ‚ö†Ô∏è  Advertencia: DOCTYPE no encontrado"
        fi
        
        # Prueba 2: Verificar JavaScript
        echo "2. Verificando JavaScript..."
        JS_FILES=$(find . -name "*.js" -type f)
        if [ -n "$JS_FILES" ]; then
          echo "   ‚úÖ Encontrados $(echo "$JS_FILES" | wc -l) archivos JS"
        else
          echo "   ‚ö†Ô∏è  No hay archivos JavaScript"
        fi
        
        # Prueba 3: Verificar README
        echo "3. Verificando documentaci√≥n..."
        if [ -f "README.md" ]; then
          LINES=$(wc -l < README.md)
          if [ $LINES -gt 3 ]; then
            echo "   ‚úÖ README tiene $LINES l√≠neas"
          else
            echo "   ‚ö†Ô∏è  README muy corto ($LINES l√≠neas)"
          fi
        fi
        
        echo ""
        echo "üìä Resultado: Pruebas completadas"
        
    - name: Generar reporte
      run: |
        echo "üìã GENERANDO REPORTE DE PRUEBAS"
        echo "==============================="
        echo "Fecha: $(date)"
        echo "Rama: ${{ github.ref }}"
        echo "Commit: ${{ github.sha }}"
        echo ""
        echo "‚úÖ Listo para merge a main"
        echo "üìå Nota: Estas pruebas se ejecutan en cada push a dev"
